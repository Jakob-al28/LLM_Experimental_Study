<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Survey Page</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/languageData.js"></script>
    <style>
        body {
            padding-top: 120px; 
            padding-bottom: 170px;
        }

        .scale {
            display: flex;
            flex-wrap: wrap; /* Allow items to wrap */
            justify-content: space-around; /* Adjust spacing to fit items */
            max-width: 100%;
            margin-bottom: 20px;
    }
        .scale input {
            display: none;
        }
        .scale label {
            display: block;
            flex-grow: 1; /* Labels grow to fill the space */
            min-width: 50px; /* Minimum width */
            max-width: 100px; /* Maximum width to avoid too wide labels */
            padding: 10px;
            text-align: center;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            cursor: pointer;
            margin: 5px; /* Add margin for touch accessibility */
        }
        .scale input:checked + label {
            background-color: #007bff;
            color: white;
        }
        @media (max-width: 768px) {
        .scale label {
            padding: 12px; /* Larger padding for easier interaction */
            font-size: 1.2em; /* Larger font size for readability */
        }
    }
    </style>
</head>
<body class="survey-body">
    <div class="survey-container">
        <h2>Survey</h2>
        <p>Thank you for submitting your answer. Please fill out this short survey.</p>
        <form id="survey-form">
            <h3>Personal Questions</h3>
            <label for="age">Age:</label>
            <input type="number" id="age" name="age" required min="0">
            <br><br>
            <label for="gender">Gender:</label>
            <select id="gender" name="gender" required>
                <option value="" disabled selected>Please choose</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="other">Other</option>
                <option value="prefer-not-to-say">Prefer not to say</option>
            </select>
            <br><br>
            <label for="occupation">Occupation/course of study:</label>
            <input type="text" id="occupation" name="occupation" required>
            <br><br>
            <label for="location">Current study semester:</label>
            <input type="number" id="location" name="location" required min="0" value="0">
            <br><br>

            <label for="education">Education:</label>
            <select id="education" name="education" required>
                <option value="" disabled selected>Please choose</option>
                <option value="no_education">Primary education</option>
                <option value="primary_education">Secondary education</option>
                <option value="secondary_education">University Entrance Qualification</option>
                <option value="vocational_training">Vocational training</option>
                <option value="bachelor_degree">Bachelor's degree</option>
                <option value="master_degree">Master's degree</option>
                <option value="doctorate_degree">Doctorate degree</option>
                <option value="professor">Professor</option>
            </select><br><br>

            <h3>Experience with the Task</h3>
            <table class="survey-table">
                <tr>
                    <th></th>
                    <th>Strongly Disagree</th>
                    <th>Disagree</th>
                    <th>Slightly Disagree</th>
                    <th>Neutral</th>
                    <th>Slightly Agree</th>
                    <th>Agree</th>
                    <th>Strongly Agree</th>
                </tr>
                <tr>
                    <td><label for="time-management">I found the time allotted for the task sufficient.</label></td>
                    <td><input type="radio" id="time-management-1" name="time-management" value="1"></td>
                    <td><input type="radio" id="time-management-2" name="time-management" value="2"></td>
                    <td><input type="radio" id="time-management-3" name="time-management" value="3"></td>
                    <td><input type="radio" id="time-management-4" name="time-management" value="4"></td>
                    <td><input type="radio" id="time-management-5" name="time-management" value="5"></td>
                    <td><input type="radio" id="time-management-6" name="time-management" value="6"></td>
                    <td><input type="radio" id="time-management-7" name="time-management" value="7"></td>
                </tr>
                <tr>
                    <td><label for="task-understanding">I found the instructions for the task very clear.</label></td>
                    <td><input type="radio" id="task-understanding-1" name="task-understanding" value="1"></td>
                    <td><input type="radio" id="task-understanding-2" name="task-understanding" value="2"></td>
                    <td><input type="radio" id="task-understanding-3" name="task-understanding" value="3"></td>
                    <td><input type="radio" id="task-understanding-4" name="task-understanding" value="4"></td>
                    <td><input type="radio" id="task-understanding-5" name="task-understanding" value="5"></td>
                    <td><input type="radio" id="task-understanding-6" name="task-understanding" value="6"></td>
                    <td><input type="radio" id="task-understanding-7" name="task-understanding" value="7"></td>
                </tr>
                <tr>
                    <td><label for="difficulty-level">I found the task to be very difficult.</label></td>
                    <td><input type="radio" id="difficulty-level-1" name="difficulty-level" value="1"></td>
                    <td><input type="radio" id="difficulty-level-2" name="difficulty-level" value="2"></td>
                    <td><input type="radio" id="difficulty-level-3" name="difficulty-level" value="3"></td>
                    <td><input type="radio" id="difficulty-level-4" name="difficulty-level" value="4"></td>
                    <td><input type="radio" id="difficulty-level-5" name="difficulty-level" value="5"></td>
                    <td><input type="radio" id="difficulty-level-6" name="difficulty-level" value="6"></td>
                    <td><input type="radio" id="difficulty-level-7" name="difficulty-level" value="7"></td>
                </tr>
                <tr>
                    <td><label for="tools-usage">I found the tools provided to be effective for completing the task.</label></td>
                    <td><input type="radio" id="tools-usage-1" name="tools-usage" value="1"></td>
                    <td><input type="radio" id="tools-usage-2" name="tools-usage" value="2"></td>
                    <td><input type="radio" id="tools-usage-3" name="tools-usage" value="3"></td>
                    <td><input type="radio" id="tools-usage-4" name="tools-usage" value="4"></td>
                    <td><input type="radio" id="tools-usage-5" name="tools-usage" value="5"></td>
                    <td><input type="radio" id="tools-usage-6" name="tools-usage" value="6"></td>
                    <td><input type="radio" id="tools-usage-7" name="tools-usage" value="7"></td>
                </tr>
                <tr>
                    <td><label for="ai-productivity">I believe that generative AI tools like ChatGPT enhance my productivity.</label></td>
                    <td><input type="radio" id="ai-productivity-1" name="ai-productivity" value="1"></td>
                    <td><input type="radio" id="ai-productivity-2" name="ai-productivity" value="2"></td>
                    <td><input type="radio" id="ai-productivity-3" name="ai-productivity" value="3"></td>
                    <td><input type="radio" id="ai-productivity-4" name="ai-productivity" value="4"></td>
                    <td><input type="radio" id="ai-productivity-5" name="ai-productivity" value="5"></td>
                    <td><input type="radio" id="ai-productivity-6" name="ai-productivity" value="6"></td>
                    <td><input type="radio" id="ai-productivity-7" name="ai-productivity" value="7"></td>
                </tr>
                <tr>
                    <td><label for="attention">Attention check, please select the "strongly disagree" button.</label></td>
                    <td><input type="radio" id="attention-1" name="attention" value="1"></td>
                    <td><input type="radio" id="attention-2" name="attention" value="2"></td>
                    <td><input type="radio" id="attention-3" name="attention" value="3"></td>
                    <td><input type="radio" id="attention-4" name="attention" value="4"></td>
                    <td><input type="radio" id="attention-5" name="attention" value="5"></td>
                    <td><input type="radio" id="attention-6" name="attention" value="6"></td>
                    <td><input type="radio" id="attention-7" name="attention" value="7"></td>
                </tr>
                <tr>
                    <td><label for="ai-reuse">I would use the AI tool again for similar tasks.</label></td>
                    <td><input type="radio" id="ai-reuse-1" name="ai-reuse" value="1"></td>
                    <td><input type="radio" id="ai-reuse-2" name="ai-reuse" value="2"></td>
                    <td><input type="radio" id="ai-reuse-3" name="ai-reuse" value="3"></td>
                    <td><input type="radio" id="ai-reuse-4" name="ai-reuse" value="4"></td>
                    <td><input type="radio" id="ai-reuse-5" name="ai-reuse" value="5"></td>
                    <td><input type="radio" id="ai-reuse-6" name="ai-reuse" value="6"></td>
                    <td><input type="radio" id="ai-reuse-7" name="ai-reuse" value="7"></td>
                </tr>
                <tr>
                    <td><label for="ux">The interface was user-friendly and easy to navigate.</label></td>
                    <td><input type="radio" id="ux-1" name="ux" value="1"></td>
                    <td><input type="radio" id="ux-2" name="ux" value="2"></td>
                    <td><input type="radio" id="ux-3" name="ux" value="3"></td>
                    <td><input type="radio" id="ux-4" name="ux" value="4"></td>
                    <td><input type="radio" id="ux-5" name="ux" value="5"></td>
                    <td><input type="radio" id="ux-6" name="ux" value="6"></td>
                    <td><input type="radio" id="ux-7" name="ux" value="7"></td>
                </tr>
                <tr>
                    <td><label for="ux-info">I felt that the system provided all the necessary information to complete the task effectively.</label></td>
                    <td><input type="radio" id="ux-info-1" name="ux-info" value="1"></td>
                    <td><input type="radio" id="ux-info-2" name="ux-info" value="2"></td>
                    <td><input type="radio" id="ux-info-3" name="ux-info" value="3"></td>
                    <td><input type="radio" id="ux-info-4" name="ux-info" value="4"></td>
                    <td><input type="radio" id="ux-info-5" name="ux-info" value="5"></td>
                    <td><input type="radio" id="ux-info-6" name="ux-info" value="6"></td>
                    <td><input type="radio" id="ux-info-7" name="ux-info" value="7"></td>
                </tr>
            </table>
            <div class="notepad">
                <label id="aiSentimentLabel" for="result">Express your opinion in 50 words and preferably in bullet points on the statement 'Generative AI tools like ChatGPT increase my productivity'. </label> <br>
                <textarea id="aiSentimentPlaceholder" placeholder="Use this field to enter your opinion." oninput="checkWordCount()"></textarea>
            </div> <br>
            <button type="submit" class="button-submit">SUBMIT SURVEY</button>
        </form>
    </div>

    <script>
    /*document.addEventListener('DOMContentLoaded', function() {
    var langData = translations[applyLanguage(localStorage.getItem('language') || 'de')];
    let toolsUsageText = '';
	const lastVisited = sessionStorage.getItem('lastVisited');

    switch(lastVisited) {
        case 'generative_control.html':
            console.log("works")
            toolsUsageText = langData.toolsUsageLabelControl; // Make sure this data is defined in your langData object
            break;
        default:
            console.log("doesnt work")
            toolsUsageText = langData.toolsUsageLabel; // Default text for other pages
			break;
	}
	document.querySelector('label[for="tools-usage"]').textContent = toolsUsageText;
});*/
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('survey-form').addEventListener('submit', function(event) {
        event.preventDefault(); 

        let form = event.target;
        let valid = true;
        let errorMessage = '';

        setTimeout(function() {
        //window.location.href = 'thankyou.html';
        }, 0); 
          
    });
});
        function checkWordCount() {
            const textarea = document.getElementById('aiSentimentPlaceholder');
            const message = document.getElementById('wordCountMessage');
            const words = textarea.value.match(/\S+/g) || [];

            if (words.length > 50) {
                alert("Word limit exceeded. Please limit your opinion to 50 words.");
                textarea.value = words.slice(0, 50).join(' ');
            } 
        }
        document.addEventListener('DOMContentLoaded', function() {
            let toolsUsageText = '';
            var langData = localStorage.getItem('language') || 'en';
            var localLangData = translations[langData];
            applyLanguage(langData);  
            const task = sessionStorage.getItem('lastVisited'); 
            console.log(task);
            switch(task) {
                case "/generative_control.html":
                    toolsUsageText = localLangData.toolsUsageLabelControl; 
                    break;
                default:
                    toolsUsageText = localLangData.toolsUsageLabel; 
                    console.log(toolsUsageText)
                    break;
            }
            document.querySelector('label[for="tools-usage"]').textContent = toolsUsageText;
        });

        function applyLanguage(lang) {
            var langData = translations[lang];
            // Update the page title and main survey introduction
            document.querySelector('h2').textContent = langData.surveyHeader;
            document.querySelectorAll('.survey-container p')[0].textContent = langData.surveyThankYouMessage;

            // Update sections and questions
            document.querySelectorAll('h3')[0].textContent = langData.personalQuestionsHeader;
            document.querySelector('label[for="age"]').textContent = langData.ageLabel;
            document.querySelector('label[for="gender"]').textContent = langData.genderLabel;
            document.querySelector('label[for="occupation"]').textContent = langData.occupationLabel;
            document.querySelector('label[for="location"]').textContent = langData.locationLabel;
            document.querySelector('label[for="education"]').textContent = langData.educationLabel;

            // Updating select options for gender and education could be more complex due to needing to update individual option texts
            const genderOptions = document.querySelectorAll('#gender option');
            genderOptions[0].textContent = langData.genderOptions.choose;
            genderOptions[1].textContent = langData.genderOptions.male;
            genderOptions[2].textContent = langData.genderOptions.female;
            genderOptions[3].textContent = langData.genderOptions.other;
            genderOptions[4].textContent = langData.genderOptions.preferNotToSay;

            const educationOptions = document.querySelectorAll('#education option');
            educationOptions[0].textContent = langData.educationOptions.choose;
            educationOptions[1].textContent = langData.educationOptions.noEducation;
            educationOptions[2].textContent = langData.educationOptions.primaryEducation;
            educationOptions[3].textContent = langData.educationOptions.secondaryEducation;
            educationOptions[4].textContent = langData.educationOptions.vocationalTraining;
            educationOptions[5].textContent = langData.educationOptions.bachelorDegree;
            educationOptions[6].textContent = langData.educationOptions.masterDegree;
            educationOptions[7].textContent = langData.educationOptions.doctorateDegree;
            educationOptions[8].textContent = langData.educationOptions.professor;

            // Update the Experience with Task section
            document.querySelectorAll('h3')[1].textContent = langData.experienceHeader;
            document.querySelector('label[for="time-management"]').textContent = langData.timeManagementLabel;
            document.querySelector('label[for="task-understanding"]').textContent = langData.taskUnderstandingLabel;
            document.querySelector('label[for="difficulty-level"]').textContent = langData.difficultyLevelLabel;
            //document.querySelector('label[for="tools-usage"]').textContent = langData.toolsUsageLabel;
            document.querySelector('label[for="ai-productivity"]').textContent = langData.aiProductivityLabel;
            document.querySelector('label[for="attention"]').textContent = langData.attentionCheckLabel;
            document.querySelector('label[for="ai-reuse"]').textContent = langData.aiReuseLabel;
            document.querySelector('label[for="ux"]').textContent = langData.ux;
            document.querySelector('label[for="ux-info"]').textContent = langData.uxInfo;

            document.getElementById('aiSentimentLabel').textContent = langData.aiSentimentLabel;
            document.getElementById('aiSentimentPlaceholder').placeholder = langData.aiSentimentPlaceholder;

            // Update the submit button text
            document.querySelector('.button-submit').textContent = langData.submitButtonSurvey;

            const headers = document.querySelectorAll('.survey-table th');

            // Assuming the first <th> is empty and headers start from the second <th>
            headers.forEach((header, index) => {
                if (index > 0) { // Skip the first <th> if it's empty or not meant to be changed
                    header.textContent = langData.headers[index - 1]; // Adjust index because headers array is 0-based
                }
            });           
}
            function areAllSelectionsMade() {
                const groups = ["time-management", "task-understanding", "difficulty-level", "tools-usage", "ai-productivity", "attention", "ai-reuse"];
                return groups.every(group => {
                    const options = document.querySelectorAll(`input[name="${group}"]`);
                    return Array.from(options).some(option => option.checked);
                });
            }

            document.getElementById('survey-form').addEventListener('submit', function(event) {
                event.preventDefault(); 
                if (!areAllSelectionsMade()) {
                    alert('Please make a selection for each category before submitting.');
                    return false;
                }
                else {
                    submitSurveyForm(); // Call the function only if all selections are made
    }           });
    </script>
    <script src="js/survey.js"></script>
</body>
</html>